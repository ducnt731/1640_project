{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{fetchAllFaculty,addNewFaculty,deleteFaculty,editFaculty}from\"../../service/userService\";import Table from'react-bootstrap/Table';import AddFaculty from\"./addFaculty\";import{toast}from\"react-toastify\";import DeleteFaculty from\"./deleteFaculty\";import EditFaculty from\"./editFaculty\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Faculty=()=>{const[isShowModalAdd,setIsShowModalAdd]=useState(0);const[isShowModalEdit,setIsShowModalEdit]=useState(false);const[isShowModalDelete,setIsShowModalDelete]=useState(false);const[dataEdit,setDataEdit]=useState({});const[dataDelete,setDataDelete]=useState({});const[totalAccounts,setTotalFaculty]=useState(0);const[listAccount,setListAccount]=useState([]);const handleClose=()=>{setIsShowModalAdd(false);setIsShowModalEdit(false);setIsShowModalDelete(false);};const handleAddNew=async account=>{try{const response=await addNewFaculty(account);if(response){await getAllFaculty();setIsShowModalAdd(!isShowModalAdd);toast.success(\"Create success!\");}}catch(error){toast.error(\"Create fail\");}};const handleEdit=accountEdit=>{setDataEdit(accountEdit);setIsShowModalEdit(true);};const handleDelete=accountDelete=>{setIsShowModalDelete(true);setDataDelete(accountDelete);};const handleEditFromModal=async dataEdit=>{console.log(dataEdit);const id=dataEdit._id;let newData=dataEdit;delete newData.__v;delete newData._id;newData={...newData,id};try{const response=await editFaculty(newData);if(response){await getAllFaculty();setIsShowModalEdit(!isShowModalEdit);toast.success(\"Edit success!\");}}catch(error){toast.error(\"Edit error\");}};// const handleDeleteFromModal = (user) =>{\n//     let cloneListAccount = [...listAccount]\n//     cloneListAccount = cloneListAccount.filter(item => item._id !== user._id)\n//     setListAccount(cloneListAccount)\n// }\nconst handleDeleteFromModal=async user=>{try{const response=await deleteFaculty(user._id);if(response){await getAllFaculty();setIsShowModalDelete(!isShowModalDelete);toast.success(\"Delete successful!!!\");}}catch(error){toast.error(\"Delete error\");}};const getAllFaculty=async()=>{let res=await fetchAllFaculty();if(res){setTotalFaculty(res.total);setListAccount(res.data);// setTotalPages(res.total_pages)\n}};useEffect(()=>{getAllFaculty();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"account-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"account-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"button-account\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"All Faculty\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setIsShowModalAdd(true),children:\"Add new\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-account\",children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:\"Faculty\"}),/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:listAccount&&listAccount.length>0&&listAccount.map((item,index)=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:item.faculty_name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"button-action\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",onClick:()=>handleEdit(item),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleDelete(item),children:\"Delete\"})]})})]},\"faculty-\".concat(index));})})]})})]})}),/*#__PURE__*/_jsx(AddFaculty,{show:isShowModalAdd,handleClose:handleClose,handleAddNewFaculty:handleAddNew}),/*#__PURE__*/_jsx(DeleteFaculty,{show:isShowModalDelete,handleClose:handleClose,dataUserDelete:dataDelete,handleAccountDelete:handleDeleteFromModal}),/*#__PURE__*/_jsx(EditFaculty,{show:isShowModalEdit,dataEditAccount:dataEdit,handleClose:handleClose,handleAccountEdit:handleEditFromModal})]});};export default Faculty;","map":{"version":3,"names":["React","useEffect","useState","fetchAllFaculty","addNewFaculty","deleteFaculty","editFaculty","Table","AddFaculty","toast","DeleteFaculty","EditFaculty","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Faculty","isShowModalAdd","setIsShowModalAdd","isShowModalEdit","setIsShowModalEdit","isShowModalDelete","setIsShowModalDelete","dataEdit","setDataEdit","dataDelete","setDataDelete","totalAccounts","setTotalFaculty","listAccount","setListAccount","handleClose","handleAddNew","account","response","getAllFaculty","success","error","handleEdit","accountEdit","handleDelete","accountDelete","handleEditFromModal","console","log","id","_id","newData","__v","handleDeleteFromModal","user","res","total","data","children","className","onClick","striped","bordered","hover","style","textAlign","length","map","item","index","faculty_name","concat","show","handleAddNewFaculty","dataUserDelete","handleAccountDelete","dataEditAccount","handleAccountEdit"],"sources":["C:/Users/ADMIN/OneDrive/Tài liệu/react-project/1640/src/components/adminFaculty/facultyAdmin.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { fetchAllFaculty, addNewFaculty, deleteFaculty, editFaculty } from \"../../service/userService\";\r\nimport Table from 'react-bootstrap/Table';\r\nimport AddFaculty from \"./addFaculty\";\r\nimport { toast } from \"react-toastify\";\r\nimport DeleteFaculty from \"./deleteFaculty\";\r\nimport EditFaculty from \"./editFaculty\";\r\n\r\n\r\nconst Faculty = () =>{\r\n\r\n    const [isShowModalAdd, setIsShowModalAdd] = useState(0)\r\n    const [isShowModalEdit, setIsShowModalEdit] = useState(false)\r\n    const [isShowModalDelete, setIsShowModalDelete] = useState(false)\r\n    const [dataEdit, setDataEdit] = useState({})\r\n    const [dataDelete, setDataDelete] = useState({})\r\n    const [totalAccounts, setTotalFaculty] = useState(0)\r\n    const [listAccount, setListAccount] = useState([])\r\n\r\n    const handleClose = () => {\r\n        setIsShowModalAdd(false)\r\n        setIsShowModalEdit(false)\r\n        setIsShowModalDelete(false)\r\n    }\r\n    const handleAddNew = async (account) => {\r\n        try {\r\n            const response = await addNewFaculty(account);\r\n            if (response) {\r\n                await getAllFaculty()\r\n                setIsShowModalAdd(!isShowModalAdd)\r\n                toast.success(\"Create success!\")\r\n            }\r\n        } catch (error) {\r\n            toast.error(\"Create fail\")\r\n        }\r\n    }\r\n    const handleEdit = (accountEdit) => {\r\n        setDataEdit(accountEdit)\r\n        setIsShowModalEdit(true)\r\n    }\r\n    const handleDelete = (accountDelete) => {\r\n        setIsShowModalDelete(true)\r\n        setDataDelete(accountDelete)\r\n    }\r\n    const handleEditFromModal = async (dataEdit) => {\r\n        console.log(dataEdit)\r\n        const id = dataEdit._id\r\n        let newData = dataEdit\r\n        delete newData.__v\r\n        delete newData._id\r\n        newData = { ...newData, id }\r\n        try {\r\n            const response = await editFaculty(newData);\r\n            if (response) {\r\n                await getAllFaculty()\r\n                setIsShowModalEdit(!isShowModalEdit)\r\n                toast.success(\"Edit success!\")\r\n            }\r\n        } catch (error) {\r\n            toast.error(\"Edit error\")\r\n        }\r\n    }\r\n\r\n    // const handleDeleteFromModal = (user) =>{\r\n    //     let cloneListAccount = [...listAccount]\r\n    //     cloneListAccount = cloneListAccount.filter(item => item._id !== user._id)\r\n    //     setListAccount(cloneListAccount)\r\n    // }\r\n    const handleDeleteFromModal = async (user) => {\r\n        try {\r\n            const response = await deleteFaculty(user._id);\r\n            if (response) {\r\n                await getAllFaculty()\r\n                setIsShowModalDelete(!isShowModalDelete)\r\n                toast.success(\"Delete successful!!!\")\r\n            }\r\n        } catch (error) {\r\n            toast.error(\"Delete error\")\r\n        }\r\n    }\r\n    const getAllFaculty = async () =>{\r\n        let res = await fetchAllFaculty()\r\n        if (res) {\r\n            setTotalFaculty(res.total)\r\n            setListAccount(res.data)\r\n            // setTotalPages(res.total_pages)\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        getAllFaculty()\r\n    }, [])\r\n\r\n    return(\r\n        <>\r\n        <div className=\"account-container\">\r\n            <div className=\"account-list\">\r\n                <div className=\"button-account\">\r\n                    <h3>All Faculty</h3>\r\n                    <button\r\n                    className=\"btn btn-primary\"\r\n                    onClick={() => setIsShowModalAdd(true)}\r\n                    >Add new</button>\r\n                </div>\r\n                <div className=\"table-account\">\r\n                    <Table striped bordered hover>\r\n                        <thead>\r\n                            <tr>\r\n                            <th style={{textAlign: \"center\"}}>Faculty</th>\r\n                            <th style={{textAlign: \"center\"}}>Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                listAccount && listAccount.length > 0 &&\r\n                                listAccount.map((item, index) => {\r\n                                    return(\r\n                                        <tr key={`faculty-${index}`}>\r\n                                            <td style={{textAlign: \"center\"}}>{item.faculty_name}</td>\r\n                                            <td>\r\n                                                <div className=\"button-action\">\r\n                                                    <button className=\"btn btn-warning\" onClick={() => handleEdit(item)}>Edit</button>\r\n                                                    <button className=\"btn btn-danger\" onClick={() => handleDelete(item)}>Delete</button>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </tbody>\r\n                    </Table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <AddFaculty\r\n            show={isShowModalAdd}\r\n            handleClose={handleClose}\r\n            handleAddNewFaculty={handleAddNew}\r\n        />\r\n        <DeleteFaculty\r\n            show = {isShowModalDelete}\r\n            handleClose = {handleClose}\r\n            dataUserDelete = {dataDelete}\r\n            handleAccountDelete = {handleDeleteFromModal}\r\n        />\r\n        <EditFaculty\r\n            show={isShowModalEdit}\r\n            dataEditAccount={dataEdit}\r\n            handleClose={handleClose}\r\n            handleAccountEdit={handleEditFromModal}\r\n        />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Faculty"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,eAAe,CAAEC,aAAa,CAAEC,aAAa,CAAEC,WAAW,KAAQ,2BAA2B,CACtG,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CACzC,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,WAAW,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAGxC,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAK,CAEjB,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CACvD,KAAM,CAACmB,eAAe,CAAEC,kBAAkB,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACqB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAACuB,QAAQ,CAAEC,WAAW,CAAC,CAAGxB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAACyB,UAAU,CAAEC,aAAa,CAAC,CAAG1B,QAAQ,CAAC,CAAC,CAAC,CAAC,CAChD,KAAM,CAAC2B,aAAa,CAAEC,eAAe,CAAC,CAAG5B,QAAQ,CAAC,CAAC,CAAC,CACpD,KAAM,CAAC6B,WAAW,CAAEC,cAAc,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CAElD,KAAM,CAAA+B,WAAW,CAAGA,CAAA,GAAM,CACtBb,iBAAiB,CAAC,KAAK,CAAC,CACxBE,kBAAkB,CAAC,KAAK,CAAC,CACzBE,oBAAoB,CAAC,KAAK,CAAC,CAC/B,CAAC,CACD,KAAM,CAAAU,YAAY,CAAG,KAAO,CAAAC,OAAO,EAAK,CACpC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAhC,aAAa,CAAC+B,OAAO,CAAC,CAC7C,GAAIC,QAAQ,CAAE,CACV,KAAM,CAAAC,aAAa,CAAC,CAAC,CACrBjB,iBAAiB,CAAC,CAACD,cAAc,CAAC,CAClCV,KAAK,CAAC6B,OAAO,CAAC,iBAAiB,CAAC,CACpC,CACJ,CAAE,MAAOC,KAAK,CAAE,CACZ9B,KAAK,CAAC8B,KAAK,CAAC,aAAa,CAAC,CAC9B,CACJ,CAAC,CACD,KAAM,CAAAC,UAAU,CAAIC,WAAW,EAAK,CAChCf,WAAW,CAACe,WAAW,CAAC,CACxBnB,kBAAkB,CAAC,IAAI,CAAC,CAC5B,CAAC,CACD,KAAM,CAAAoB,YAAY,CAAIC,aAAa,EAAK,CACpCnB,oBAAoB,CAAC,IAAI,CAAC,CAC1BI,aAAa,CAACe,aAAa,CAAC,CAChC,CAAC,CACD,KAAM,CAAAC,mBAAmB,CAAG,KAAO,CAAAnB,QAAQ,EAAK,CAC5CoB,OAAO,CAACC,GAAG,CAACrB,QAAQ,CAAC,CACrB,KAAM,CAAAsB,EAAE,CAAGtB,QAAQ,CAACuB,GAAG,CACvB,GAAI,CAAAC,OAAO,CAAGxB,QAAQ,CACtB,MAAO,CAAAwB,OAAO,CAACC,GAAG,CAClB,MAAO,CAAAD,OAAO,CAACD,GAAG,CAClBC,OAAO,CAAG,CAAE,GAAGA,OAAO,CAAEF,EAAG,CAAC,CAC5B,GAAI,CACA,KAAM,CAAAX,QAAQ,CAAG,KAAM,CAAA9B,WAAW,CAAC2C,OAAO,CAAC,CAC3C,GAAIb,QAAQ,CAAE,CACV,KAAM,CAAAC,aAAa,CAAC,CAAC,CACrBf,kBAAkB,CAAC,CAACD,eAAe,CAAC,CACpCZ,KAAK,CAAC6B,OAAO,CAAC,eAAe,CAAC,CAClC,CACJ,CAAE,MAAOC,KAAK,CAAE,CACZ9B,KAAK,CAAC8B,KAAK,CAAC,YAAY,CAAC,CAC7B,CACJ,CAAC,CAED;AACA;AACA;AACA;AACA;AACA,KAAM,CAAAY,qBAAqB,CAAG,KAAO,CAAAC,IAAI,EAAK,CAC1C,GAAI,CACA,KAAM,CAAAhB,QAAQ,CAAG,KAAM,CAAA/B,aAAa,CAAC+C,IAAI,CAACJ,GAAG,CAAC,CAC9C,GAAIZ,QAAQ,CAAE,CACV,KAAM,CAAAC,aAAa,CAAC,CAAC,CACrBb,oBAAoB,CAAC,CAACD,iBAAiB,CAAC,CACxCd,KAAK,CAAC6B,OAAO,CAAC,sBAAsB,CAAC,CACzC,CACJ,CAAE,MAAOC,KAAK,CAAE,CACZ9B,KAAK,CAAC8B,KAAK,CAAC,cAAc,CAAC,CAC/B,CACJ,CAAC,CACD,KAAM,CAAAF,aAAa,CAAG,KAAAA,CAAA,GAAW,CAC7B,GAAI,CAAAgB,GAAG,CAAG,KAAM,CAAAlD,eAAe,CAAC,CAAC,CACjC,GAAIkD,GAAG,CAAE,CACLvB,eAAe,CAACuB,GAAG,CAACC,KAAK,CAAC,CAC1BtB,cAAc,CAACqB,GAAG,CAACE,IAAI,CAAC,CACxB;AACJ,CACJ,CAAC,CACDtD,SAAS,CAAC,IAAM,CACZoC,aAAa,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACItB,KAAA,CAAAE,SAAA,EAAAuC,QAAA,eACA3C,IAAA,QAAK4C,SAAS,CAAC,mBAAmB,CAAAD,QAAA,cAC9BzC,KAAA,QAAK0C,SAAS,CAAC,cAAc,CAAAD,QAAA,eACzBzC,KAAA,QAAK0C,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC3B3C,IAAA,OAAA2C,QAAA,CAAI,aAAW,CAAI,CAAC,cACpB3C,IAAA,WACA4C,SAAS,CAAC,iBAAiB,CAC3BC,OAAO,CAAEA,CAAA,GAAMtC,iBAAiB,CAAC,IAAI,CAAE,CAAAoC,QAAA,CACtC,SAAO,CAAQ,CAAC,EAChB,CAAC,cACN3C,IAAA,QAAK4C,SAAS,CAAC,eAAe,CAAAD,QAAA,cAC1BzC,KAAA,CAACR,KAAK,EAACoD,OAAO,MAACC,QAAQ,MAACC,KAAK,MAAAL,QAAA,eACzB3C,IAAA,UAAA2C,QAAA,cACIzC,KAAA,OAAAyC,QAAA,eACA3C,IAAA,OAAIiD,KAAK,CAAE,CAACC,SAAS,CAAE,QAAQ,CAAE,CAAAP,QAAA,CAAC,SAAO,CAAI,CAAC,cAC9C3C,IAAA,OAAIiD,KAAK,CAAE,CAACC,SAAS,CAAE,QAAQ,CAAE,CAAAP,QAAA,CAAC,QAAM,CAAI,CAAC,EACzC,CAAC,CACF,CAAC,cACR3C,IAAA,UAAA2C,QAAA,CAEQzB,WAAW,EAAIA,WAAW,CAACiC,MAAM,CAAG,CAAC,EACrCjC,WAAW,CAACkC,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,GAAK,CAC7B,mBACIpD,KAAA,OAAAyC,QAAA,eACI3C,IAAA,OAAIiD,KAAK,CAAE,CAACC,SAAS,CAAE,QAAQ,CAAE,CAAAP,QAAA,CAAEU,IAAI,CAACE,YAAY,CAAK,CAAC,cAC1DvD,IAAA,OAAA2C,QAAA,cACIzC,KAAA,QAAK0C,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC1B3C,IAAA,WAAQ4C,SAAS,CAAC,iBAAiB,CAACC,OAAO,CAAEA,CAAA,GAAMlB,UAAU,CAAC0B,IAAI,CAAE,CAAAV,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClF3C,IAAA,WAAQ4C,SAAS,CAAC,gBAAgB,CAACC,OAAO,CAAEA,CAAA,GAAMhB,YAAY,CAACwB,IAAI,CAAE,CAAAV,QAAA,CAAC,QAAM,CAAQ,CAAC,EACpF,CAAC,CACN,CAAC,cAAAa,MAAA,CAPWF,KAAK,CAQrB,CAAC,CAEb,CAAC,CAAC,CAEH,CAAC,EACL,CAAC,CACP,CAAC,EACL,CAAC,CACL,CAAC,cACNtD,IAAA,CAACL,UAAU,EACP8D,IAAI,CAAEnD,cAAe,CACrBc,WAAW,CAAEA,WAAY,CACzBsC,mBAAmB,CAAErC,YAAa,CACrC,CAAC,cACFrB,IAAA,CAACH,aAAa,EACV4D,IAAI,CAAI/C,iBAAkB,CAC1BU,WAAW,CAAIA,WAAY,CAC3BuC,cAAc,CAAI7C,UAAW,CAC7B8C,mBAAmB,CAAItB,qBAAsB,CAChD,CAAC,cACFtC,IAAA,CAACF,WAAW,EACR2D,IAAI,CAAEjD,eAAgB,CACtBqD,eAAe,CAAEjD,QAAS,CAC1BQ,WAAW,CAAEA,WAAY,CACzB0C,iBAAiB,CAAE/B,mBAAoB,CAC1C,CAAC,EACA,CAAC,CAEX,CAAC,CAED,cAAe,CAAA1B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}