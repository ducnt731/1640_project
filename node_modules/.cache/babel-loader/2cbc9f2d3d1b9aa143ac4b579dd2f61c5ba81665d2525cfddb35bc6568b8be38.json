{"ast":null,"code":"import{memo,useEffect,useState}from\"react\";import{toast}from'react-toastify';import'../style/loginForm.css';import{loginApi}from\"../service/userService\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=()=>{const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[isShowPass,setIsShowPass]=useState(false);const[loadingAPI,setLoadingAPI]=useState(false);const navigate=useNavigate();const handleLogin=async e=>{e.preventDefault();console.log(email,password);if(!email||!password){toast.error(\"You need to enter the email and password\");return;}setLoadingAPI(true);let res=await loginApi(email,password);console.log(res.data);try{const data=res.data;if(data){localStorage.setItem(\"email\",data.user.email);localStorage.setItem(\"name\",data.user.name);localStorage.setItem(\"role\",data.user.role);localStorage.setItem(\"user_id\",data.user._id);localStorage.setItem(\"token\",data.accessToken);if(data.user.role!='admin'){toast.error(\"You must be admin to render this site!\");}else{navigate('/admin');toast.success(\"Login successful!!!\");}}}catch(error){toast.error(\"Wrong email or password\");}setLoadingAPI(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",required:true,value:email,onChange:event=>setEmail(event.target.value)}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-user icon\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:isShowPass===true?\"text\":\"password\",placeholder:\"Password\",required:true,value:password,onChange:event=>setPassword(event.target.value)}),/*#__PURE__*/_jsx(\"i\",{className:isShowPass===true?\"fa-solid fa-eye icon\":\"fa-solid fa-eye-slash icon\",onClick:()=>setIsShowPass(!isShowPass)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"remember-forgot\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),\"Remember me\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"/forgot-password\",children:\"Forgot password\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:email&&password?false:true,children:[loadingAPI&&/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-sync fa-spin\"}),\" Login\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"register-link\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Register\"})]})})]})})});};export default/*#__PURE__*/memo(LoginForm);","map":{"version":3,"names":["memo","useEffect","useState","toast","loginApi","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginForm","email","setEmail","password","setPassword","isShowPass","setIsShowPass","loadingAPI","setLoadingAPI","navigate","handleLogin","e","preventDefault","console","log","error","res","data","localStorage","setItem","user","name","role","_id","accessToken","success","className","children","onSubmit","type","placeholder","required","value","onChange","event","target","onClick","href","disabled"],"sources":["C:/Users/ADMIN/OneDrive/Tài liệu/react-project/1640/src/Page/login.js"],"sourcesContent":["import { memo, useEffect, useState } from \"react\"\r\nimport { toast } from 'react-toastify';\r\nimport '../style/loginForm.css'\r\nimport { loginApi } from \"../service/userService\"\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst LoginForm = () => {\r\n    const [email, setEmail] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n\r\n    const [isShowPass, setIsShowPass] = useState(false)\r\n    const [loadingAPI, setLoadingAPI] = useState(false)\r\n    const navigate = useNavigate()\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault()\r\n        console.log(email, password)\r\n        if (!email || !password) {\r\n            toast.error(\"You need to enter the email and password\")\r\n            return\r\n        }\r\n        setLoadingAPI(true)\r\n        let res = await loginApi(email, password)\r\n        console.log(res.data)\r\n        try {\r\n            const data = res.data\r\n            if (data) {\r\n                localStorage.setItem(\"email\", data.user.email)\r\n                localStorage.setItem(\"name\", data.user.name)\r\n                localStorage.setItem(\"role\", data.user.role)\r\n                localStorage.setItem(\"user_id\", data.user._id)\r\n                localStorage.setItem(\"token\", data.accessToken)\r\n                if(data.user.role!='admin'){\r\n                    toast.error(\"You must be admin to render this site!\")\r\n                }else{\r\n                    navigate('/admin')\r\n                    toast.success(\"Login successful!!!\")\r\n                }\r\n                \r\n            }\r\n        } catch (error) {\r\n            toast.error(\"Wrong email or password\")\r\n        }\r\n        setLoadingAPI(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"wrapper\">\r\n            <div className=\"login-form\">\r\n                <form onSubmit={handleLogin}>\r\n                    <h1>Login</h1>\r\n                    <div className=\"input-box\">\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Email\" required\r\n                            value={email}\r\n                            onChange={(event) => setEmail(event.target.value)}\r\n                        />\r\n                        <i className=\"fa-solid fa-user icon\"></i>\r\n                    </div>\r\n                    <div className=\"input-box\">\r\n                        <input\r\n                            type={isShowPass === true ? \"text\" : \"password\"}\r\n                            placeholder=\"Password\" required\r\n                            value={password}\r\n                            onChange={(event) => setPassword(event.target.value)}\r\n                        />\r\n                        <i className={isShowPass === true ? \"fa-solid fa-eye icon\" : \"fa-solid fa-eye-slash icon\"}\r\n                            onClick={() => setIsShowPass(!isShowPass)}\r\n                        ></i>\r\n                    </div>\r\n                    <div className=\"remember-forgot\">\r\n                        <label><input type=\"checkbox\" />Remember me</label>\r\n                        <a href=\"/forgot-password\">Forgot password</a>\r\n                    </div>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={email && password ? false : true}\r\n                    >{loadingAPI && <i className=\"fa-solid fa-sync fa-spin\"></i>} Login</button>\r\n                    <div className=\"register-link\">\r\n                        <p>Don't have an account? <a href=\"/register\">Register</a></p>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default memo(LoginForm)"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}