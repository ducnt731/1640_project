{"ast":null,"code":"import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';import{editAccount,fetchAllFaculty}from'../../service/userService';import{useEffect,useState}from'react';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditAccount=props=>{const{show,handleClose,handleAccountEdit,dataEditAccount}=props;const[showImage,setShowImage]=useState();const[selectedFile,setSelectedFile]=useState(null);const[userData,setUserData]=useState(dataEditAccount);console.log(userData);const[listFaculty,setListFaculty]=useState([]);const getAllFaculty=async()=>{let res=await fetchAllFaculty();if(res){setListFaculty(res.data);}};useEffect(()=>{getAllFaculty();},[]);useEffect(()=>{if(dataEditAccount){setUserData(dataEditAccount);}},[dataEditAccount]);const handleChange=e=>{const{name,value}=e.target;setUserData({...userData,[name]:value});};const handleImage=file=>{const reader=new FileReader();reader.readAsDataURL(file.target.files[0]);reader.onload=function(){setShowImage(reader.result);setUserData({...userData,userData:file.target.files[0]});};};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Account\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"body-add\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"name\",value:userData.name,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",value:userData.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",disabled:true,className:\"form-control\",value:userData.password})]}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select\",value:userData.faculty,name:\"faculty\",onChange:handleChange,children:listFaculty&&listFaculty.map(faculty=>{return/*#__PURE__*/_jsx(\"option\",{value:faculty._id,children:faculty.faculty_name},faculty._id);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:userData.role,name:\"role\",onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"student\",children:\"Student\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"marketing manage\",children:\"Marketing Manage\"}),/*#__PURE__*/_jsx(\"option\",{value:\"marketing coordinator\",children:\"Marketing Coordinator\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"form-label\",children:\"Image\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formFile\",value:userData.image,style:{width:\"100px\",height:\"100px\",borderRadius:\"10px\",overflow:\"hidden\",objectFit:'cover',objectPosition:\"center\"},className:\"  d-flex align-items-center justify-content-center border\",children:showImage?/*#__PURE__*/_jsx(\"img\",{src:showImage,alt:\"\"}):\"+\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control d-none\",type:\"file\",id:\"formFile\",name:\"image\",onChange:handleImage})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:async()=>{// handleAccountEdit(userData)\ntry{const response=await editAccount(userData);if(response){handleClose();toast.success(\"Edit success\");}}catch(error){toast.error(\"Edit error\");}},children:\"Save\"})]})]});};export default EditAccount;","map":{"version":3,"names":["Modal","Button","editAccount","fetchAllFaculty","useEffect","useState","toast","jsx","_jsx","jsxs","_jsxs","EditAccount","props","show","handleClose","handleAccountEdit","dataEditAccount","showImage","setShowImage","selectedFile","setSelectedFile","userData","setUserData","console","log","listFaculty","setListFaculty","getAllFaculty","res","data","handleChange","e","name","value","target","handleImage","file","reader","FileReader","readAsDataURL","files","onload","result","onHide","children","Header","closeButton","Title","Body","className","type","onChange","email","disabled","password","faculty","map","_id","faculty_name","role","htmlFor","image","style","width","height","borderRadius","overflow","objectFit","objectPosition","src","alt","id","Footer","variant","onClick","response","success","error"],"sources":["C:/Users/ADMIN/OneDrive/Tài liệu/react-project/1640/src/components/ManageAccount/editAccount.js"],"sourcesContent":["import Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { editAccount, fetchAllFaculty } from '../../service/userService';\r\nimport { useEffect, useState } from 'react';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst EditAccount = (props) => {\r\n    const {show, handleClose, handleAccountEdit, dataEditAccount} = props\r\n    const [showImage,setShowImage]=useState()\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    const [userData, setUserData] = useState(dataEditAccount)\r\n    console.log(userData);\r\n    const [listFaculty, setListFaculty] = useState([])\r\n\r\n    const getAllFaculty = async () =>{\r\n        let res = await fetchAllFaculty()\r\n        if (res) {\r\n            setListFaculty(res.data)\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        getAllFaculty()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (dataEditAccount) {\r\n            setUserData(dataEditAccount)\r\n        }\r\n    }, [dataEditAccount])\r\n\r\n    const handleChange=(e)=>{\r\n        const {name,value}=e.target;\r\n        setUserData({...userData,[name]:value})\r\n    }\r\n    const handleImage=(file)=>{\r\n        const reader=new FileReader()\r\n        reader.readAsDataURL(file.target.files[0])\r\n        reader.onload = function () {\r\n            setShowImage(reader.result)\r\n            setUserData({...userData, userData:file.target.files[0]})\r\n            \r\n        };\r\n        \r\n    }\r\n\r\n    return(\r\n        <Modal show={show} onHide={handleClose}>\r\n            <Modal.Header closeButton>\r\n            <Modal.Title>Edit Account</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"body-add\">\r\n                    <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Name</label>\r\n                        <input type=\"text\" className=\"form-control\" name='name' value={userData.name}  onChange={handleChange}/>\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Email</label>\r\n                        <input type=\"email\" className=\"form-control\" name='email' value={userData.email} onChange={handleChange}/>\r\n                    </div>\r\n                    <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Password</label>\r\n                        <input type=\"password\" disabled className=\"form-control\" value={userData.password}/>\r\n                    </div>\r\n                    <select className=\"form-select\" value={userData.faculty}  name='faculty' onChange={handleChange}>\r\n                        {listFaculty&&listFaculty.map((faculty)=>{\r\n                            return  <option key={faculty._id} value={faculty._id}>{faculty.faculty_name}</option>\r\n                        })}\r\n                    </select>\r\n                    <br/>\r\n                    <select className=\"form-select\" value={userData.role} name='role' onChange={handleChange}>\r\n                        <option value={\"student\"}>Student</option>\r\n                        <option value={\"admin\"}>Admin</option>\r\n                        <option value={\"marketing manage\"}>Marketing Manage</option>\r\n                        <option value={\"marketing coordinator\"}>Marketing Coordinator</option>\r\n                    </select>\r\n                \r\n                    <div className=\"mb-3\">\r\n                        <h1  className=\"form-label\">Image</h1>\r\n                        <label htmlFor=\"formFile\" value={userData.image} style={{width:\"100px\", height:\"100px\",borderRadius:\"10px\",overflow:\"hidden\",objectFit:'cover',objectPosition:\"center\"}} className='  d-flex align-items-center justify-content-center border'>\r\n                            {showImage?<img src={showImage} alt=''/>:\"+\"}\r\n                        </label>\r\n                        <input className=\"form-control d-none\" type=\"file\" id=\"formFile\" name='image' onChange={handleImage}/>\r\n                    </div>\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={handleClose}>\r\n                Close\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={ async ()=>{\r\n                // handleAccountEdit(userData)\r\n                try {\r\n                    const response = await editAccount(userData);\r\n                    if (response) {\r\n                        handleClose()\r\n                        toast.success(\"Edit success\")\r\n                    }\r\n                } catch (error) {\r\n                    toast.error(\"Edit error\")\r\n                }\r\n            }}>\r\n                Save\r\n            </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default EditAccount"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}